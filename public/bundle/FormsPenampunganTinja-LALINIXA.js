import{c as C}from"./chunk-NTYBRVPL.js";import{a as D,c as S}from"./chunk-5VCMSLSJ.js";import{a as $,b as q,d as y,e as t,f as I,g as _,i as M,j as E,k as u,n as H,t as v}from"./chunk-C2W3HSDQ.js";import{G as h,m as B,n as d,o as i}from"./chunk-OMCZQBA2.js";import"./chunk-G76L5PL2.js";import"./chunk-FVQQD5TJ.js";import"./chunk-OFEJ2A6N.js";import{d as p,e as Y,f as W}from"./chunk-2N2KBSVT.js";var R=p(Y()),k=p($()),a=p(W());var z=p(q());var A=()=>{let{module:f,init:G}=D(e=>e.redux),{openFormsPenampunganTinja:b,detailContent:K,volumeSeptiktank:L,pageType:g,detailPenampunganTinja:c}=f,T=S(),[w,N]=(0,a.useState)(!1),[l,P]=(0,a.useState)({}),[o,r]=(0,a.useState)({});(0,a.useLayoutEffect)(()=>(g==="update"&&M(c)&&r({...c}),()=>{}),[g,c]);let x=()=>{P({}),r({})},j=()=>{x(),T(C({...f,openFormsPenampunganTinja:!1,pageType:"",detailPenampunganTinja:{}}))},O=e=>{e.preventDefault();let n={pageType:g,user_modified:t("username",G),id_responden:t("id",K),id_volume_septiktank:t("id",L)};Object.keys(o).forEach(m=>n[m]=o[m]),N(!0);let F=H("/submitpenampungantinja",n);F.then(m=>{if(typeof m>"u")return;let{data:s}=m;if(typeof s.code<"u"&&t("code",s)!==200){y(!1,t("message",s));return}P(s.errors),y(s.status,s.msg_response),s.status&&(x(),T(C({...f,...s.content,openFormsPenampunganTinja:!1,pageType:"",detailPenampunganTinja:{}})))}),F.finally(()=>{N(!1)})};return a.default.createElement(a.default.Fragment,null,b&&a.default.createElement("div",{className:"drawer-overlay",style:{zIndex:9999}}),a.default.createElement("div",{className:`bg-white drawer drawer-end ${b?"drawer-on":""}`,style:{width:window.innerWidth/2,zIndex:9999}},a.default.createElement(d,{className:"rounded-0 w-100"},a.default.createElement(d.Header,{className:"pe-5"},a.default.createElement("div",{className:"card-title"},a.default.createElement("div",{className:"d-flex justify-content-center flex-column me-3"},a.default.createElement("span",{className:"fs-4 fw-bold text-gray-900 text-hover-primary me-1 lh-1"},E(g)," Keterangan Penampungan Tinja"))),a.default.createElement("div",{className:"card-toolbar"},a.default.createElement("button",{className:"btn btn-sm btn-icon btn-active-light-primary",onClick:j},a.default.createElement("i",{className:"ki-duotone ki-cross fs-2"},a.default.createElement("span",{className:"path1"}),a.default.createElement("span",{className:"path2"}))))),a.default.createElement(d.Body,{className:"hover-scroll-overlay-y"},a.default.createElement(h,null,a.default.createElement(i,null,u("Tahun Penyedotan","kala_penyedotan",{onChange:e=>r(n=>({...n,[e.target.name]:e.target.value})),value:t("kala_penyedotan",o)},!0,l)),a.default.createElement(i,null,u("Tahun Pembangunan","pembangunan",{onChange:e=>r(n=>({...n,[e.target.name]:e.target.value})),value:t("pembangunan",o)},!0,l)),a.default.createElement(i,null,u("Harga Penyedotan","harga_penyedotan",{onChange:e=>r(n=>({...n,[e.target.name]:e.target.value.replace(/\./g,"")})),value:(0,z.default)({thousand:"."}).to(I(t("harga_penyedotan",o)))},!0,l))),a.default.createElement(h,null,a.default.createElement(i,null,u("Tingkat Keamanan","tingkat_keamanan",{onChange:e=>r(n=>({...n,[e.target.name]:e.target.value})),value:t("tingkat_keamanan",o)}))),a.default.createElement(h,null,a.default.createElement(i,null,v("Tanggal Penyedotan Terakhir","tanggal_penyedotan_terakhir",{onChange:([e])=>r(n=>({...n,tanggal_penyedotan_terakhir:(0,k.default)(e).format("YYYY-MM-DD")})),value:t("tanggal_penyedotan_terakhir",o)},!0,l)),a.default.createElement(i,null,v("Tanggal Rencana Penyedotan","tanggal_rencana_penyedotan",{onChange:([e])=>r(n=>({...n,tanggal_rencana_penyedotan:(0,k.default)(e).format("YYYY-MM-DD")})),value:t("tanggal_rencana_penyedotan",o)},!0,l)))),a.default.createElement(d.Footer,{className:"text-end"},a.default.createElement(B,null,_("Simpan",w,{onClick:w?null:O}),_("Batal",!1,{variant:"danger",onClick:()=>j()}))))))},X=A;export{X as default};
