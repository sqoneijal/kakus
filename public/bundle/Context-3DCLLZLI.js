import{c as r}from"./chunk-NTYBRVPL.js";import{a as w}from"./chunk-GNHI6NMO.js";import{a as x,c as S}from"./chunk-5VCMSLSJ.js";import{d as T,e as o,f as y,g,i as j,n as B}from"./chunk-C2W3HSDQ.js";import{G as F,m as z,n as s,o as h}from"./chunk-OMCZQBA2.js";import"./chunk-G76L5PL2.js";import"./chunk-FVQQD5TJ.js";import"./chunk-OFEJ2A6N.js";import{d as f,e as N,f as H}from"./chunk-2N2KBSVT.js";var Z=f(N()),e=f(H());var G=e.default.lazy(()=>import("./BiodataResponden-H3ZTFW2E.js")),K=e.default.lazy(()=>import("./Koordinat-VGTXCOPN.js")),E=e.default.lazy(()=>import("./KepemilikanRumah-EYNZKPEZ.js")),M=e.default.lazy(()=>import("./FormsPenampunganTinja-LALINIXA.js")),U=e.default.lazy(()=>import("./FormsVolumeSeptiktank-E7ZQH4HH.js")),_=e.default.lazy(()=>import("./VolumeSeptiktank-UB4P6DRA.js")),$=e.default.lazy(()=>import("./PenampunganTinja-TLIBN7RV.js")),u=null,q=({daftarKepemilikanRumah:P})=>{let{module:a}=x(n=>n.redux),{openDetail:i,detailContent:t,volumeSeptiktank:D}=a,l=S(),c=(0,e.useRef)(null),[I,k]=(0,e.useState)(!0),V=()=>{u.remove(),l(r({...a,openDetail:!1,detailContent:{}}))},b=n=>{let p={id_responden:n};k(!0);let d=B("/getdetail",p);d.then(C=>{if(typeof C>"u")return;let{data:m}=C;if(typeof m.code<"u"&&o("code",m)!==200){T(!1,o("message",m));return}l(r({...a,...m}))}),d.finally(()=>{k(!1)})};(0,e.useLayoutEffect)(()=>{if(i&&j(t)){b(o("id",t));let n=y(o("latitude",t)),p=y(o("longitude",t));u=L.map("maps-detail-responden").setView([n,p],100),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(u);let d=L.icon({iconUrl:"/bundle/marker-icon.png",iconSize:[40,40]});L.marker([n,p],{icon:d}).addTo(u).bindPopup(o("nama_lengkap",t)).openPopup()}return()=>{}},[i,t]);let v={daftarKepemilikanRumah:P,getData:b};return e.default.createElement(e.default.Fragment,null,i&&e.default.createElement("div",{className:"drawer-overlay"}),e.default.createElement("div",{className:`bg-white drawer drawer-start ${i?"drawer-on":""}`,style:{width:"100%"}},e.default.createElement(s,{className:"rounded-0 w-100"},e.default.createElement(s.Header,{className:"pe-5"},e.default.createElement("div",{className:"card-title"},e.default.createElement("div",{className:"d-flex justify-content-center flex-column me-3"},e.default.createElement("span",{className:"fs-4 fw-bold text-gray-900 text-hover-primary me-1 lh-1"},"Detail Responden"))),e.default.createElement("div",{className:"card-toolbar"},e.default.createElement("button",{className:"btn btn-sm btn-icon btn-active-light-primary",onClick:V},e.default.createElement("i",{className:"ki-duotone ki-cross fs-2"},e.default.createElement("span",{className:"path1"}),e.default.createElement("span",{className:"path2"}))))),e.default.createElement(s.Body,{className:"hover-scroll-overlay-y",id:"card-body-responden",ref:c},e.default.createElement(F,null,e.default.createElement(h,null,!I&&e.default.createElement(e.default.Suspense,{fallback:e.default.createElement(w,{visible:!0,color:"#4fa94d",radius:"9",wrapperStyle:{alignItems:"center",display:"flex",justifyContent:"center"},wrapperClass:"page-loader flex-column bg-dark bg-opacity-25"})},e.default.createElement(G,{...v}),e.default.createElement(K,null),e.default.createElement(E,null),e.default.createElement(_,null),e.default.createElement($,{...v}),e.default.createElement(M,null),e.default.createElement(U,null))),e.default.createElement(h,{id:"maps-detail-responden",style:{height:c.current?c.current.clientHeight:"auto"}}))),e.default.createElement(s.Footer,{className:"text-end"},e.default.createElement(z,null,g("Perbaharui Volume Septiktank",!1,{onClick:()=>l(r({...a,openFormsVolumeSeptiktank:!0}))}),o("id",D)&&g("Tambah Penampungan Tinja",!1,{variant:"success",onClick:()=>l(r({...a,openFormsPenampunganTinja:!0,pageType:"insert"}))}))))))},X=q;export{X as default};
