{
  "version": 3,
  "sources": ["../../src/page/ControlPanel/Admin/Dashboard/DaftarPenampungan.jsx"],
  "sourcesContent": ["import React, { useLayoutEffect, useState } from \"react\";\nimport { Card, Col, Row, Table } from \"react-bootstrap\";\nimport { Each } from \"~/Each\";\nimport * as h from \"~/Helpers\";\n\nlet map = null;\n\nconst DaftarPenampungan = () => {\n   // bool\n   const [isLoading, setIsLoading] = useState(true);\n\n   // array\n   const [listContent, setListContent] = useState([]);\n\n   const statusPenyedotan = {\n      \"\": <span className=\"badge badge-warning\">Belum dilakukan</span>,\n      1: <span className=\"badge badge-success\">Sudah dilakukan</span>,\n      2: <span className=\"badge badge-danger\">Tolak</span>,\n   };\n\n   const renderTooltip = (data) => {\n      return `<div class=\"row\">\n         <h4>Volume Septiktank [${h.parse(\"nama_lengkap\", data)}]</h4>\n         <div class=\"col\">\n            <div class=\"mb-2 row\">\n               <div class=\"fw-semibold text-muted col-sm-12\">Panjang</div>\n               <div class=\"col-md-12 col-sm-12\"><span class=\"fw-bold fs-6 text-gray-800\">${h.parse(\"panjang\", data)} m2</span></div>\n            </div>\n            <div class=\"mb-2 row\">\n               <div class=\"fw-semibold text-muted col-sm-12\">Lebar</div>\n               <div class=\"col-md-12 col-sm-12\"><span class=\"fw-bold fs-6 text-gray-800\">${h.parse(\"lebar\", data)} m2</span></div>\n            </div>\n            <div class=\"mb-2 row\">\n               <div class=\"fw-semibold text-muted col-sm-12\">Jenis</div>\n               <div class=\"col-md-12 col-sm-12\"><span class=\"fw-bold fs-6 text-gray-800\">${h.parse(\"jenis_septiktank\", data)}</span></div>\n            </div>\n         </div>\n         <div class=\"col\">\n            <div class=\"mb-2 row\">\n               <div class=\"fw-semibold text-muted col-sm-12\">Kedalaman</div>\n               <div class=\"col-md-12 col-sm-12\"><span class=\"fw-bold fs-6 text-gray-800\">${h.parse(\"kedalaman\", data)} m2</span></div>\n            </div>\n            <div class=\"mb-2 row\">\n               <div class=\"fw-semibold text-muted col-sm-12\">Diameter</div>\n               <div class=\"col-md-12 col-sm-12\"><span class=\"fw-bold fs-6 text-gray-800\">${h.parse(\"diameter_tabung\", data)} m2</span></div>\n            </div>\n         </div>\n      </div>`;\n   };\n\n   useLayoutEffect(() => {\n      if (!isLoading && h.arrLength(listContent)) {\n         const firstLat = h.toInt(h.parse(\"latitude\", listContent[0]));\n         const firstLong = h.toInt(h.parse(\"longitude\", listContent[0]));\n\n         map = L.map(\"maps\").setView([firstLat, firstLong], 3);\n         L.tileLayer(\"https://tile.openstreetmap.org/{z}/{x}/{y}.png\").addTo(map);\n\n         const markerWarning = L.icon({\n            iconUrl: \"/bundle/marker-icon-warning.png\",\n            iconSize: [40, 40],\n         });\n\n         const markerSuccess = L.icon({\n            iconUrl: \"/bundle/marker-icon-success.png\",\n            iconSize: [40, 40],\n         });\n\n         const markerDanger = L.icon({\n            iconUrl: \"/bundle/marker-icon-success.png\",\n            iconSize: [40, 40],\n         });\n\n         const icon = {\n            \"\": markerWarning,\n            1: markerSuccess,\n            2: markerDanger,\n         };\n\n         listContent.forEach((row) => {\n            const latitude = h.toInt(h.parse(\"latitude\", row));\n            const longitude = h.toInt(h.parse(\"longitude\", row));\n\n            L.marker([latitude, longitude], { icon: icon[h.parse(\"status\", row)] })\n               .bindPopup(renderTooltip(row))\n               .addTo(map);\n         });\n      }\n      return () => {};\n   }, [isLoading, listContent]);\n\n   const getDaftarPenampungan = (page, cari = \"\") => {\n      setIsLoading(true);\n      const fetch = h.get(`/getdaftarpenampungan?page=${page}&cari=${cari}`, {}, true);\n      fetch.then((res) => {\n         if (typeof res === \"undefined\") return;\n\n         const { data } = res;\n\n         if (typeof data.code !== \"undefined\" && h.parse(\"code\", data) !== 200) {\n            h.notification(false, h.parse(\"message\", data));\n            return;\n         }\n\n         if (h.arrLength(data)) {\n            if (cari) {\n               setListContent(data);\n            } else {\n               setListContent((prev) => prev.concat(data));\n            }\n            getDaftarPenampungan(page + 1, cari);\n         } else {\n            setIsLoading(false);\n         }\n      });\n   };\n\n   useLayoutEffect(() => {\n      getDaftarPenampungan(0);\n      return () => {};\n   }, []);\n\n   return (\n      !isLoading && (\n         <Card className=\"shadow-sm\">\n            <Card.Body>\n               <Row>\n                  <Col id=\"maps\" />\n                  <Col md={4}>\n                     {h.form_text(`Cari Responden`, `cari`, {\n                        onKeyDown: (e) => {\n                           if (e.target.value && e.code === \"Enter\") {\n                              map.remove();\n                              getDaftarPenampungan(0, e.target.value);\n                           }\n                        },\n                     })}\n                     <div style={{ maxHeight: 600, overflow: \"auto\", minHeight: 600 }}>\n                        <Table responsive hover className=\"align-middle table-row-dashed fs-6\" size=\"sm\">\n                           <thead>\n                              <tr className=\"text-start text-gray-400 fw-bold fs-7 text-uppercase gs-0\">\n                                 <th>nama responden</th>\n                                 <th>nik responden</th>\n                                 <th>status penyedotan</th>\n                              </tr>\n                           </thead>\n                           <tbody className=\"text-gray-600 fw-semibold\">\n                              <Each\n                                 of={listContent}\n                                 render={(row) => (\n                                    <tr\n                                       style={{ cursor: \"pointer\" }}\n                                       onClick={() => {\n                                          const latitude = h.toInt(h.parse(\"latitude\", row));\n                                          const longitude = h.toInt(h.parse(\"longitude\", row));\n\n                                          map.setView([latitude, longitude], 50);\n                                       }}>\n                                       <td>{h.parse(\"nama_lengkap\", row)}</td>\n                                       <td>{h.parse(\"nik\", row)}</td>\n                                       <td>{statusPenyedotan[h.parse(\"status\", row)]}</td>\n                                    </tr>\n                                 )}\n                              />\n                           </tbody>\n                        </Table>\n                     </div>\n                  </Col>\n               </Row>\n            </Card.Body>\n         </Card>\n      )\n   );\n};\nexport default DaftarPenampungan;\n"],
  "mappings": "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",
  "names": ["import_leaflet", "import_react", "map", "DaftarPenampungan", "isLoading", "setIsLoading", "listContent", "setListContent", "statusPenyedotan", "React", "renderTooltip", "data", "parse", "arrLength", "firstLat", "toInt", "firstLong", "markerWarning", "markerSuccess", "markerDanger", "icon", "row", "latitude", "longitude", "getDaftarPenampungan", "page", "cari", "get", "res", "notification", "prev", "Card_default", "Row_default", "Col_default", "form_text", "Table_default", "Each", "DaftarPenampungan_default"]
}
